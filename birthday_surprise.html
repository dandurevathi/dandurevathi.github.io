<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>üéÇ Happy Birthday!</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    background: #0A0015;
    font-family: 'Nunito', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    color: white;
  }

  /* ‚îÄ‚îÄ STARS BACKGROUND ‚îÄ‚îÄ */
  .stars {
    position: fixed; inset: 0;
    background:
      radial-gradient(ellipse at 20% 30%, rgba(155,93,229,0.2) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 70%, rgba(255,107,157,0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(255,209,102,0.05) 0%, transparent 60%);
    pointer-events: none; z-index: 0;
  }

  /* ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ */
  #confetti-canvas {
    position: fixed; inset: 0;
    pointer-events: none; z-index: 100;
  }

  /* ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ */
  .page {
    position: relative; z-index: 1;
    min-height: 100vh;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 40px 20px;
    text-align: center;
  }

  /* ‚îÄ‚îÄ CAKE ANIMATION ‚îÄ‚îÄ */
  .cake-wrap {
    position: relative;
    margin-bottom: 30px;
    animation: floatUp 3s ease-in-out infinite;
  }

  @keyframes floatUp {
    0%,100% { transform: translateY(0); }
    50%      { transform: translateY(-15px); }
  }

  .cake { font-size: 100px; display: block; filter: drop-shadow(0 0 30px rgba(255,209,102,0.6)); }

  /* Candle flames */
  .flames {
    position: absolute; top: -10px; left: 50%;
    transform: translateX(-50%);
    display: flex; gap: 18px;
  }

  .flame {
    width: 12px; height: 20px;
    background: linear-gradient(to top, #FF6B00, #FFD166, #FFF);
    border-radius: 50% 50% 30% 30%;
    animation: flicker 0.5s ease-in-out infinite alternate;
    filter: blur(1px);
  }

  .flame:nth-child(2) { animation-delay: 0.2s; }
  .flame:nth-child(3) { animation-delay: 0.1s; }

  @keyframes flicker {
    0%   { transform: scale(1) rotate(-3deg); opacity: 1; }
    100% { transform: scale(1.1) rotate(3deg); opacity: 0.85; }
  }

  /* ‚îÄ‚îÄ TITLE ‚îÄ‚îÄ */
  .happy {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.5rem, 8vw, 5rem);
    font-weight: 900;
    background: linear-gradient(135deg, #FFD166, #FF6B9D, #9B5DE5, #06D6A0);
    background-size: 300% 300%;
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradShift 4s ease infinite;
    line-height: 1.1;
    margin-bottom: 10px;
  }

  @keyframes gradShift {
    0%   { background-position: 0% 50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .person-name {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2rem, 6vw, 4rem);
    font-weight: 900;
    font-style: italic;
    color: #FFD166;
    text-shadow: 0 0 40px rgba(255,209,102,0.5);
    margin-bottom: 30px;
    animation: nameGlow 2s ease-in-out infinite;
  }

  @keyframes nameGlow {
    0%,100% { text-shadow: 0 0 20px rgba(255,209,102,0.4); }
    50%      { text-shadow: 0 0 50px rgba(255,209,102,0.9), 0 0 80px rgba(255,107,157,0.4); }
  }

  /* ‚îÄ‚îÄ WISH CARD ‚îÄ‚îÄ */
  .wish-card {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border-radius: 24px;
    padding: 32px 36px;
    max-width: 600px;
    width: 100%;
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
  }

  .wish-card::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(255,107,157,0.08), rgba(155,93,229,0.08));
    border-radius: 24px;
  }

  .wish-text {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    line-height: 1.9;
    color: rgba(255,255,255,0.9);
    position: relative; z-index: 1;
    margin-bottom: 16px;
  }

  .wish-from {
    font-size: 1rem;
    color: #9B5DE5;
    font-weight: 700;
    position: relative; z-index: 1;
  }

  /* ‚îÄ‚îÄ MUSIC PLAYER ‚îÄ‚îÄ */
  .music-section {
    margin-bottom: 30px;
  }

  .music-label {
    font-size: 0.85rem;
    color: rgba(255,255,255,0.4);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .music-btn {
    background: linear-gradient(135deg, #FF6B9D, #9B5DE5);
    border: none; border-radius: 50px;
    padding: 14px 32px;
    color: white; font-size: 1rem;
    font-weight: 800; cursor: pointer;
    font-family: 'Nunito', sans-serif;
    display: inline-flex; align-items: center; gap: 10px;
    transition: all 0.3s;
    box-shadow: 0 4px 25px rgba(155,93,229,0.4);
    animation: btnPulse 2s ease-in-out infinite;
  }

  @keyframes btnPulse {
    0%,100% { box-shadow: 0 4px 25px rgba(155,93,229,0.4); }
    50%      { box-shadow: 0 4px 40px rgba(255,107,157,0.7); }
  }

  .music-btn:hover { transform: scale(1.05); }
  .music-btn.playing { background: linear-gradient(135deg, #06D6A0, #3B82F6); }

  /* Music visualizer bars */
  .bars {
    display: inline-flex; align-items: center; gap: 3px;
    height: 20px;
  }

  .bar {
    width: 3px; background: white; border-radius: 2px;
    animation: barDance 0.6s ease-in-out infinite alternate;
  }
  .bar:nth-child(1) { animation-delay: 0.0s; height: 8px; }
  .bar:nth-child(2) { animation-delay: 0.1s; height: 14px; }
  .bar:nth-child(3) { animation-delay: 0.2s; height: 20px; }
  .bar:nth-child(4) { animation-delay: 0.1s; height: 14px; }
  .bar:nth-child(5) { animation-delay: 0.0s; height: 8px; }

  @keyframes barDance {
    0%   { transform: scaleY(0.4); }
    100% { transform: scaleY(1); }
  }

  .bars.paused .bar { animation-play-state: paused; }

  /* ‚îÄ‚îÄ EMOJI RAIN ‚îÄ‚îÄ */
  .emoji-float {
    position: fixed;
    font-size: 1.5rem;
    animation: emojiRain linear infinite;
    pointer-events: none; z-index: 99;
    opacity: 0;
  }

  @keyframes emojiRain {
    0%   { transform: translateY(-50px) rotate(0deg); opacity: 0; }
    10%  { opacity: 1; }
    90%  { opacity: 0.8; }
    100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
  }

  /* ‚îÄ‚îÄ BOTTOM ORNAMENT ‚îÄ‚îÄ */
  .ornament {
    font-size: 1.8rem;
    letter-spacing: 12px;
    animation: ornamentFloat 3s ease-in-out infinite;
    margin-top: 10px;
  }

  @keyframes ornamentFloat {
    0%,100% { letter-spacing: 12px; opacity: 0.8; }
    50%      { letter-spacing: 18px; opacity: 1; }
  }

  /* ‚îÄ‚îÄ AGE BADGE ‚îÄ‚îÄ */
  .age-badge {
    display: inline-block;
    background: linear-gradient(135deg, #FFD166, #FF9F1C);
    color: #1A0A00;
    font-size: 0.9rem; font-weight: 900;
    padding: 6px 18px; border-radius: 30px;
    margin-bottom: 20px;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
</style>
</head>
<body>

<div class="stars"></div>
<canvas id="confetti-canvas"></canvas>

<div class="page">

  <!-- CAKE -->
  <div class="cake-wrap">
    <div class="flames">
      <div class="flame"></div>
      <div class="flame"></div>
      <div class="flame"></div>
    </div>
    <span class="cake">üéÇ</span>
  </div>

  <!-- TITLE -->
  <div class="happy">Happy Birthday</div>
  <div class="person-name" id="personName">Amma</div>
  <div class="age-badge" id="ageBadge">Wishing you a wonderful day! üåü</div>

  <!-- WISH -->
  <div class="wish-card">
    <div class="wish-text" id="wishText">
      May your day be as wonderful and bright as you make every day for those around you!
      Wishing you all the joy, laughter, and love you truly deserve. üéÇ‚ú®
    </div>
    <div class="wish-from" id="wishFrom">‚Äî With love, Revathi üíõ</div>
  </div>

  <!-- MUSIC -->
  <div class="music-section">
    <div class="music-label">üéµ Your birthday song</div>
    <button class="music-btn" id="musicBtn" onclick="toggleMusic()">
      <span id="btnIcon">‚ñ∂</span>
      <span id="btnText">Play Birthday Song</span>
      <div class="bars paused" id="bars">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>
    </button>
  </div>

  <!-- ORNAMENT -->
  <div class="ornament">üéâ üéà üéä ‚ú® üéÅ</div>

</div>

<!-- Hidden audio -->
<audio id="birthdayAudio" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg"/>
</audio>

<script>
  // ‚îÄ‚îÄ URL PARAMS ‚Äî personalize via link
  // Usage: birthday.html?name=Amma&age=38&from=Revathi&wish=Custom+wish+here
  const params = new URLSearchParams(window.location.search);
  const name   = params.get('name')  || 'Friend';
  const age    = params.get('age')   || '';
  const from   = params.get('from')  || 'Revathi';
  const wish   = params.get('wish')  || null;

  const wishes = [
    `May your day be as wonderful and bright as you make every day for those around you! Wishing you all the joy, laughter, and love you deserve. üéÇ‚ú®`,
    `Another year older, another year wiser and more wonderful! May this birthday bring you everything your heart desires. Have a magical day! üéâ`,
    `On your special day, I hope you are surrounded by love, laughter, and all your favourite things. You deserve the absolute best! üåü`,
    `Wishing you a birthday filled with sweet moments, warm memories, and endless happiness. May this year be your best one yet! üéà`,
    `May every candle on your cake represent a beautiful wish that comes true this year. You are so special and so loved! üïØÔ∏è`,
  ];

  document.getElementById('personName').textContent = name;
  document.getElementById('wishFrom').textContent = `‚Äî With love, ${from} üíõ`;
  document.getElementById('wishText').textContent = wish || wishes[Math.floor(Math.random() * wishes.length)];

  if (age) {
    document.getElementById('ageBadge').textContent = `Turning ${age} today! üåü`;
  }

  // ‚îÄ‚îÄ MUSIC
  const audio   = document.getElementById('birthdayAudio');
  const btn     = document.getElementById('musicBtn');
  const bars    = document.getElementById('bars');
  let playing   = false;

  // Use Web Audio API to generate a simple birthday melody
  let audioCtx = null;

  function playBirthdayMelody() {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // Happy Birthday notes (frequency in Hz)
    const notes = [
      261.63, 261.63, 293.66, 261.63, 349.23, 329.63,
      261.63, 261.63, 293.66, 261.63, 392.00, 349.23,
      261.63, 261.63, 523.25, 440.00, 349.23, 329.63, 293.66,
      466.16, 466.16, 440.00, 349.23, 392.00, 349.23
    ];
    const durations = [
      0.3,0.1,0.4,0.4,0.4,0.8,
      0.3,0.1,0.4,0.4,0.4,0.8,
      0.3,0.1,0.4,0.4,0.4,0.4,0.8,
      0.3,0.1,0.4,0.4,0.4,0.8
    ];

    let time = audioCtx.currentTime + 0.1;

    function scheduleMelody() {
      notes.forEach((freq, i) => {
        const osc  = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.type = 'sine';
        osc.frequency.setValueAtTime(freq, time);
        gain.gain.setValueAtTime(0, time);
        gain.gain.linearRampToValueAtTime(0.3, time + 0.02);
        gain.gain.linearRampToValueAtTime(0, time + durations[i] - 0.05);
        osc.start(time);
        osc.stop(time + durations[i]);
        time += durations[i] + 0.05;
      });

      // Loop after melody ends
      const totalDuration = durations.reduce((a,b) => a+b, 0) + notes.length * 0.05 + 2;
      setTimeout(() => {
        if (playing) scheduleMelody();
      }, totalDuration * 1000);
    }

    scheduleMelody();
  }

  function toggleMusic() {
    playing = !playing;
    if (playing) {
      playBirthdayMelody();
      btn.classList.add('playing');
      bars.classList.remove('paused');
      document.getElementById('btnIcon').textContent = '‚è∏';
      document.getElementById('btnText').textContent = 'Playing...';
    } else {
      if (audioCtx) { audioCtx.close(); audioCtx = null; }
      btn.classList.remove('playing');
      bars.classList.add('paused');
      document.getElementById('btnIcon').textContent = '‚ñ∂';
      document.getElementById('btnText').textContent = 'Play Birthday Song';
    }
  }

  // ‚îÄ‚îÄ CONFETTI
  const canvas = document.getElementById('confetti-canvas');
  const ctx    = canvas.getContext('2d');
  canvas.width  = window.innerWidth;
  canvas.height = window.innerHeight;

  window.addEventListener('resize', () => {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  });

  const COLORS = ['#FF6B9D','#9B5DE5','#FFD166','#06D6A0','#FF9F1C','#3B82F6','#ffffff'];

  const pieces = Array.from({length: 120}, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height - canvas.height,
    w: 6 + Math.random() * 8,
    h: 8 + Math.random() * 6,
    color: COLORS[Math.floor(Math.random() * COLORS.length)],
    speed: 1.5 + Math.random() * 3,
    angle: Math.random() * Math.PI * 2,
    spin:  (Math.random() - 0.5) * 0.15,
    wave:  Math.random() * Math.PI * 2,
    waveSpeed: 0.02 + Math.random() * 0.03,
  }));

  function drawConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    pieces.forEach(p => {
      p.y     += p.speed;
      p.angle += p.spin;
      p.wave  += p.waveSpeed;
      p.x     += Math.sin(p.wave) * 1.2;
      if (p.y > canvas.height + 20) {
        p.y = -20;
        p.x = Math.random() * canvas.width;
      }
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.angle);
      ctx.fillStyle = p.color;
      ctx.globalAlpha = 0.8;
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();
    });
    requestAnimationFrame(drawConfetti);
  }
  drawConfetti();

  // ‚îÄ‚îÄ FLOATING EMOJIS
  const emojis = ['üéâ','üéà','üéä','‚ú®','üåü','üíõ','üéÅ','ü•≥','üíú','üé∂'];
  function spawnEmoji() {
    const el = document.createElement('div');
    el.className = 'emoji-float';
    el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    el.style.left = Math.random() * 100 + 'vw';
    el.style.animationDuration = (5 + Math.random() * 8) + 's';
    el.style.animationDelay = (Math.random() * 3) + 's';
    el.style.fontSize = (1 + Math.random() * 1.5) + 'rem';
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 12000);
  }
  setInterval(spawnEmoji, 800);
</script>
</body>
</html>
